/*
 e-com 2016-12-19 
*/
ecomApp.controller("accountController",["config","$rootScope","$http","$window","$cookies","Auth","addToCart",function(a,b,c,d,e,f,g){var h=this;h.loginDetails={},h.errorMessage="",h.login=function(){var f={url:a.apiUrl+"login",data:h.loginDetails,method:"post",headers:{"Content-Type":"application/json"}};c(f).then(function(a){"object"==typeof a.data?(b.user=a.data,b.isLoggedIn=!0,e.put("token",b.user.token),e.putObject("userDetails",a.data),g.getExistingCart(),d.location.href="#!/"):h.errorMessage=a.data}),function(a){console.log("problem while creating product"),console.log(a)}}}]),ecomApp.controller("checkoutController",["config","$rootScope","$http","$cookies","addToCart","Auth",function(a,b,c,d,e,f){var g=this;g.cartItems={},b.isCartEmpty||(g.cart=b.cart),g.removeFromCart=function(a){e.removeItemFromCart(a);var b=g.cart.items.indexOf(a);g.cart.items.splice(b,1)}}]),ecomApp.controller("contactController",["config","$scope","$http",function(a,b,c){b.message="Contact us! JK. This is just a demo."}]),ecomApp.controller("mainController",["config","$rootScope","$http","Auth","addToCart",function(a,b,c,d,e){var f=this;f.latestProducts,f.latestFeaturedProduct;var g={url:a.apiUrl+"product/latest",method:"get",headers:{Authorization:"Bearer "+b.token}};c(g).then(function(a){f.latestProducts=a.data}),function(a){console.log("some problem in getting user details")};var g={url:a.apiUrl+"product/featured",method:"get",headers:{Authorization:"Bearer "+b.token}};c(g).then(function(a){f.latestFeaturedProduct=a.data[0]}),function(a){console.log("some problem in getting user details")}}]),ecomApp.controller("productsController",["config","$rootScope","$http","Auth",function(a,b,c,d){var e=this;e.product={},e.existingProduct;var f={url:a.apiUrl+"product",method:"get",headers:{Authorization:"Bearer "+b.token}};c(f).then(function(a){console.log(a.data),e.existingProduct=a.data}),function(a){console.log("some problem in getting product details")},e.addProduct=function(){var d={url:a.apiUrl+"product",data:e.product,method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+b.token}};c(d).then(function(a){e.existingProduct.push(a.data),e.product={}}),function(a){console.log("problem while creating product"),console.log(a)}},e.deleteProduct=function(d){var f={url:a.apiUrl+"product/"+d.id,method:"delete",headers:{Authorization:"Bearer "+b.token}};c(f).then(function(a){e.removeUser(d)}),function(a){console.log(a)}},e.removeUser=function(a){var b=e.existingProduct.indexOf(a);e.existingProduct.splice(b,1)},console.log(e.existingProduct)}]),ecomApp.controller("registerController",["config","$scope","$http","$window","$rootScope","Auth",function(a,b,c,d,e,f){var g=this;g.userDetails={},g.signup=function(){var b={url:a.apiUrl+"user",data:g.userDetails,method:"post",headers:{"Content-Type":"application/json"}};c(b).then(function(a){g.userDetails={},d.location.href="#!/account"}),function(a){}}}]),ecomApp.controller("singleController",["config","$scope","$http","addToCart","Auth",function(a,b,c,d,e){b.message="Contact us! JK. This is just a demo."}]),ecomApp.controller("usersController",["config","$scope","$http","Auth",function(a,b,c,d){var e=this;e.user={},e.existingUser;var f={url:a.apiUrl+"user",method:"get"};c(f).then(function(a){console.log(a.data),e.existingUser=a.data}),function(a){console.log("some problem in getting user details")},e.createUser=function(){var b={url:a.apiUrl+"user",data:e.user,method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+$rootScope.token}};c(b).then(function(a){e.existingUser.push(a.data),e.user={}}),function(a){console.log("problem while creating user"),console.log(a)}},e.deleteUser=function(b){var d={url:a.apiUrl+"user/"+b.id,method:"delete",headers:{Authorization:"Bearer "+$rootScope.token}};c(d).then(function(a){e.removeUser(b)}),function(a){console.log(a)}},e.removeUser=function(a){var b=e.existingUser.indexOf(a);e.existingUser.splice(b,1)}}]);